<!DOCTYPE html>
<html lang="en-us" dir="ltr" itemscope itemtype="http://schema.org/Article" data-r-output-format="html">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.148.2">
    <meta name="generator" content="Relearn 8.0.0+9803d5122ebb3276acea823f476e9eb44f607862">
    <meta name="description" content="For the purpose of this workshop, you’ll create and expose a service to the HTTPbin API. HTTPbin is an echo-type application that returns requests back to the requester as responses.
Deploy the Application Deploy the application using the following declaration with both Kubernetes Deployment and Service.
:::code{showCopyAction=true showLineNumbers=false language=shell} cat «EOF | kubectl apply -f - apiVersion: v1 kind: Service metadata: name: httpbin namespace: kong labels: app: httpbin spec: type: ClusterIP ports:">
    <meta name="author" content="">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Kong Gateway Service and Kong Route :: API Management with Kong Konnect">
    <meta name="twitter:description" content="For the purpose of this workshop, you’ll create and expose a service to the HTTPbin API. HTTPbin is an echo-type application that returns requests back to the requester as responses.
Deploy the Application Deploy the application using the following declaration with both Kubernetes Deployment and Service.
:::code{showCopyAction=true showLineNumbers=false language=shell} cat «EOF | kubectl apply -f - apiVersion: v1 kind: Service metadata: name: httpbin namespace: kong labels: app: httpbin spec: type: ClusterIP ports:">
    <meta property="og:url" content="http://localhost:1313/12-api-gateway/122-kong-service-route/index.html">
    <meta property="og:site_name" content="API Management with Kong Konnect">
    <meta property="og:title" content="Kong Gateway Service and Kong Route :: API Management with Kong Konnect">
    <meta property="og:description" content="For the purpose of this workshop, you’ll create and expose a service to the HTTPbin API. HTTPbin is an echo-type application that returns requests back to the requester as responses.
Deploy the Application Deploy the application using the following declaration with both Kubernetes Deployment and Service.
:::code{showCopyAction=true showLineNumbers=false language=shell} cat «EOF | kubectl apply -f - apiVersion: v1 kind: Service metadata: name: httpbin namespace: kong labels: app: httpbin spec: type: ClusterIP ports:">
    <meta property="og:locale" content="en_us">
    <meta property="og:type" content="article">
    <meta property="article:section" content="Kong API Gateway">
    <meta itemprop="name" content="Kong Gateway Service and Kong Route :: API Management with Kong Konnect">
    <meta itemprop="description" content="For the purpose of this workshop, you’ll create and expose a service to the HTTPbin API. HTTPbin is an echo-type application that returns requests back to the requester as responses.
Deploy the Application Deploy the application using the following declaration with both Kubernetes Deployment and Service.
:::code{showCopyAction=true showLineNumbers=false language=shell} cat «EOF | kubectl apply -f - apiVersion: v1 kind: Service metadata: name: httpbin namespace: kong labels: app: httpbin spec: type: ClusterIP ports:">
    <meta itemprop="wordCount" content="572">
    <title>Kong Gateway Service and Kong Route :: API Management with Kong Konnect</title>
    <link href="/css/auto-complete/auto-complete.min.css?1754488547" rel="stylesheet">
    <script src="/js/auto-complete/auto-complete.min.js?1754488547" defer></script>
    <script src="/js/search-lunr.js?1754488547" defer></script>
    <script src="/js/search.js?1754488547" defer></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.index_js_url="/searchindex.en.js?1754488547";
    </script>
    <script src="/js/lunr/lunr.min.js?1754488547" defer></script>
    <script src="/js/lunr/lunr.stemmer.support.min.js?1754488547" defer></script>
    <script src="/js/lunr/lunr.multi.min.js?1754488547" defer></script>
    <script src="/js/lunr/lunr.en.min.js?1754488547" defer></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.contentLangs=['en'];
    </script>
    <link href="/fonts/fontawesome/css/fontawesome-all.min.css?1754488547" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/fonts/fontawesome/css/fontawesome-all.min.css?1754488547" rel="stylesheet"></noscript>
    <link href="/css/perfect-scrollbar/perfect-scrollbar.min.css?1754488547" rel="stylesheet">
    <link href="/css/theme.css?1754488547" rel="stylesheet">
    <link href="/css/format-html.css?1754488547" rel="stylesheet" id="R-format-style">
    <script>
      window.relearn = window.relearn || {};
      // configuration
      window.relearn.min = ``;
      window.relearn.path='\/12-api-gateway\/122-kong-service-route\/index.html';
      window.relearn.relBasePath='..\/..';
      window.relearn.relBaseUri='..\/..';
      window.relearn.absBaseUri='http:\/\/localhost:1313';
      window.relearn.disableAnchorCopy=false;
      window.relearn.disableAnchorScrolling=false;
      window.relearn.disableInlineCopyToClipboard=false;
      window.relearn.enableBlockCodeWrap=true;
      // legal
      window.relearn.getItem = (s,n) => {return s.getItem(n)};
      window.relearn.setItem = (s,n,v) => {return s.setItem(n,v)};
      window.relearn.removeItem = (s,n) => {return s.removeItem(n)};
      // translations
      window.T_Copy_to_clipboard = `Copy to clipboard`;
      window.T_Copied_to_clipboard = `Copied to clipboard!`;
      window.T_Copy_link_to_clipboard = `Copy link to clipboard`;
      window.T_Link_copied_to_clipboard = `Copied link to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
      // variant stuff
      window.relearn.themevariants = [ 'blue' ];
      window.relearn.customvariantname = "my-custom-variant";
      window.relearn.changeVariant = function(variant) {
        var oldVariant = document.documentElement.dataset.rThemeVariant;
        window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
        document.documentElement.dataset.rThemeVariant = variant;
        if (oldVariant != variant) {
          document.dispatchEvent( new CustomEvent('themeVariantLoaded', { detail: { variant, oldVariant } }) );
          window.relearn.markVariant();
        }
      }
      window.relearn.markVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant");
        document.querySelectorAll(".R-variantswitcher select").forEach((select) => {select.value = variant;});
      }
      window.relearn.initVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant") ?? "";
        if( variant == window.relearn.customvariantname ){
        }else if( !variant || !window.relearn.themevariants.includes(variant) ){
          variant = window.relearn.themevariants[0];
          window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
        }
        document.documentElement.dataset.rThemeVariant = variant;
      }
      window.relearn.initVariant();
      window.relearn.markVariant();
    </script>
  </head>
  <body class="mobile-support html" data-url="/12-api-gateway/122-kong-service-route/index.html">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar">
        <div class="topbar-wrapper">
          <div class="topbar-sidebar-divider"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar" data-content-empty="disable" data-width-s="show" data-width-m="hide" data-width-l="hide"><button class="topbar-control" onclick="toggleNav()" type="button" title="Menu (CTRL&#43;ALT&#43;n)"><i class="fa-fw fas fa-bars"></i></button>
            </div>
            <div class="topbar-button topbar-button-toc" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="toggleTopbarFlyout(this)" type="button" title="Table of Contents (CTRL&#43;ALT&#43;t)"><i class="fa-fw fas fa-list-alt"></i></button>
              <div class="topbar-content">
                <div class="topbar-content-wrapper"> 
                </div>
              </div>
            </div>
          </div>
          <ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype="http://schema.org/BreadcrumbList"><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><a itemprop="item" href="/index.html"><span itemprop="name">API Management with Kong Konnect</span></a><meta itemprop="position" content="1">&nbsp;>&nbsp;</li><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><a itemprop="item" href="/12-api-gateway/index.html"><span itemprop="name">Kong API Gateway</span></a><meta itemprop="position" content="2">&nbsp;>&nbsp;</li><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><span itemprop="name">Kong Gateway Service and Kong Route</span><meta itemprop="position" content="3"></li>
          </ol>
          <div class="topbar-area topbar-area-end" data-area="end">
            <div class="topbar-button topbar-button-prev" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/12-api-gateway/index.html" title="Kong API Gateway (🡐)"><i class="fa-fw fas fa-chevron-left"></i></a>
            </div>
            <div class="topbar-button topbar-button-next" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/12-api-gateway/15-use-cases/index.html" title="Use Cases (🡒)"><i class="fa-fw fas fa-chevron-right"></i></a>
            </div>
            <div class="topbar-button topbar-button-more" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="toggleTopbarFlyout(this)" type="button" title="More"><i class="fa-fw fas fa-ellipsis-v"></i></button>
              <div class="topbar-content">
                <div class="topbar-content-wrapper">
                  <div class="topbar-area topbar-area-more" data-area="more">
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable 12-api-gateway" tabindex="-1">
        <div class="flex-block-wrapper">
<article class="default">
  <header class="headline">
  </header>

<h1 id="kong-gateway-service-and-kong-route">Kong Gateway Service and Kong Route</h1>

<p>For the purpose of this workshop, you’ll create and expose a service to the HTTPbin API. HTTPbin is an echo-type application that returns requests back to the requester as responses.</p>
<h4 id="deploy-the-application">Deploy the Application</h4>
<p>Deploy the application using the following declaration with both Kubernetes Deployment and Service.</p>
<p>:::code{showCopyAction=true showLineNumbers=false language=shell}
cat &laquo;EOF | kubectl apply -f -
apiVersion: v1
kind: Service
metadata:
name: httpbin
namespace: kong
labels:
app: httpbin
spec:
type: ClusterIP
ports:</p>
<ul>
<li>name: http
port: 8000
targetPort: 80
selector:
app: httpbin</li>
</ul>
<hr>
<p>apiVersion: apps/v1
kind: Deployment
metadata:
name: httpbin
namespace: kong
spec:
replicas: 1
selector:
matchLabels:
app: httpbin
version: v1
template:
metadata:
labels:
app: httpbin
version: v1
spec:
containers:
- image: docker.io/kong/httpbin
imagePullPolicy: IfNotPresent
name: httpbin
ports:
- containerPort: 8000
EOF
:::</p>
<h6 id="check-the-deployment">Check the Deployment</h6>
<ul>
<li>Observe Kubernetes Services in <code>kong</code> namespace</li>
</ul>
<p>:::code{showCopyAction=true showLineNumbers=false language=shell}
kubectl get service httpbin -n kong
:::</p>
<p><strong>Sample Output</strong></p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>NAME      TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)    AGE
httpbin   ClusterIP   10.100.89.150   &lt;none&gt;        8000/TCP   20h</code></pre></div>
<ul>
<li>Observe Pods in <code>kong</code> namespace</li>
</ul>
<p>:::code{showCopyAction=true showLineNumbers=false language=shell}
kubectl get pod -n kong
:::</p>
<p><strong>Sample Output</strong></p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>NAME                                         READY   STATUS    RESTARTS   AGE
dataplane-dataplane1-rbwck-98fcbc654-rt75p   1/1     Running   0          76m
httpbin-5c69574c95-xq76q                     1/1     Running   0          20h</code></pre></div>
<h4 id="ping-konnect-with-deck">Ping Konnect with decK</h4>
<p>Before start using decK, you should ping Konnect to check if the connecting is up. Note we assume you have the PAT environment variable set. Please, refer to the previous section to learn how to issue a PAT.</p>
<p>:::code{showCopyAction=true showLineNumbers=false language=shell}
deck gateway ping &ndash;konnect-control-plane-name kong-aws &ndash;konnect-token $PAT
:::</p>
<p><strong>Expected Output</strong></p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>Successfully Konnected to the Example-Name organization!</code></pre></div>
<h4 id="create-a-kong-gateway-service-and-kong-route">Create a Kong Gateway Service and Kong Route</h4>
<p>Create the following declaration first. Remarks:</p>
<ul>
<li>Note the <code>host</code> and <code>port</code> refers to the HTTPbin&rsquo;s Kubernetes Service FQDN (Fully Qualified Domain Name), in our case <code>http://httpbin.kong.svc.cluster.local:8000</code>.</li>
<li>The declaration tags the objects so you can managing them apart from other ones.</li>
</ul>
<p>:::code{showCopyAction=true showLineNumbers=false language=shell}
cat &gt; httpbin.yaml &laquo; &lsquo;EOF&rsquo;
_format_version: &ldquo;3.0&rdquo;
_konnect:
control_plane_name: kong-aws
_info:
select_tags:</p>
<ul>
<li>httpbin-service-route
services:</li>
<li>name: httpbin-service
host: httpbin.kong.svc.cluster.local
port: 8000
routes:
<ul>
<li>name: httpbin-route
paths:
<ul>
<li>/httpbin-route
EOF
:::</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="submit-the-declaration">Submit the declaration</h4>
<p>Now, you can use the following command to sync your Konnect Control Plane with the declaration. Note that all other existing objects will be deleted.</p>
<p>:::code{showCopyAction=true showLineNumbers=false language=shell}
deck gateway sync &ndash;konnect-token $PAT httpbin.yaml
:::</p>
<p><strong>Expected Output</strong></p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>creating service httpbin-service
creating route httpbin-route
Summary:
  Created: 2
  Updated: 0
  Deleted: 0</code></pre></div>
<p>You should see your new service’s overview page.</p>
<p><a href="#R-image-32990590315d1add1bb446017e43e627" class="lightbox-link"><img alt="service1" class="lazy lightbox figure-image" loading="lazy" src="/static/images/httpbin-service-route.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-32990590315d1add1bb446017e43e627"><img alt="service1" class="lazy lightbox lightbox-image" loading="lazy" src="/static/images/httpbin-service-route.png"></a></p>
<h4 id="consume-the-route">Consume the Route</h4>
<p>We are to use the same ELB provisioned during the Data Plane deployment:</p>
<p>:::code{showCopyAction=true showLineNumbers=false language=shell}
curl -v $DATA_PLANE_LB/httpbin-route/get
:::</p>
<p>If successful, you should see the <strong>httpbin</strong> output:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>* Host a06491acb99f64d0481263f3536909da-1064984904.us-east-2.elb.amazonaws.com:80 was resolved.
* IPv6: (none)
* IPv4: 18.216.117.235, 3.12.182.158
*   Trying 18.216.117.235:80...
* Connected to a06491acb99f64d0481263f3536909da-1064984904.us-east-2.elb.amazonaws.com (18.216.117.235) port 80
&gt; GET /httpbin-route/get HTTP/1.1
&gt; Host: a06491acb99f64d0481263f3536909da-1064984904.us-east-2.elb.amazonaws.com
&gt; User-Agent: curl/8.7.1
&gt; Accept: */*
&gt; 
* Request completely sent off
&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/json
&lt; Content-Length: 443
&lt; Connection: keep-alive
&lt; Server: gunicorn
&lt; Date: Tue, 27 May 2025 22:13:06 GMT
&lt; Access-Control-Allow-Origin: *
&lt; Access-Control-Allow-Credentials: true
&lt; X-Kong-Upstream-Latency: 3
&lt; X-Kong-Proxy-Latency: 5
&lt; Via: 1.1 kong/3.10.0.1-enterprise-edition
&lt; X-Kong-Request-Id: df36ba70ea577c16533bb72fcb3fa553
&lt; 
{&#34;args&#34;:{},&#34;headers&#34;:{&#34;Accept&#34;:&#34;*/*&#34;,&#34;Connection&#34;:&#34;keep-alive&#34;,&#34;Host&#34;:&#34;httpbin.kong.svc.cluster.local:8000&#34;,&#34;User-Agent&#34;:&#34;curl/8.7.1&#34;,&#34;X-Forwarded-Host&#34;:&#34;a06491acb99f64d0481263f3536909da-1064984904.us-east-2.elb.amazonaws.com&#34;,&#34;X-Forwarded-Path&#34;:&#34;/httpbin-route/get&#34;,&#34;X-Forwarded-Prefix&#34;:&#34;/httpbin-route&#34;,&#34;X-Kong-Request-Id&#34;:&#34;df36ba70ea577c16533bb72fcb3fa553&#34;},&#34;origin&#34;:&#34;192.168.61.217&#34;,&#34;url&#34;:&#34;http://httpbin.kong.svc.cluster.local:8000/get&#34;}
* Connection #0 to host a06491acb99f64d0481263f3536909da-1064984904.us-east-2.elb.amazonaws.com left intact</code></pre></div>
<p>Kong-gratulations! have now reached the end of this module by having your first service set up, running, and routing traffic proxied through a Kong data plane. You can now click <strong>Next</strong> to proceed with the next module.</p>
<p>Kong-gratulations! have now reached the end of this module by creating a Kong Service. You can now click <strong>Next</strong> to proceed with the next chapter.</p>

  <footer class="footline">
  </footer>
</article>
        </div>
      </main>
    </div>
    <aside id="R-sidebar" class="default-animation">
      <div id="R-header-topbar" class="default-animation"></div>
      <div id="R-header-wrapper" class="default-animation">
        <div id="R-header" class="default-animation">
          <a id="R-logo" class="R-default" href="/index.html">
            <div class="logo-title">API Management with Kong Konnect</div>
          </a>
        </div>
        <search><form action="/search/index.html" method="get">
          <div class="searchbox default-animation">
            <button class="search-detail" type="submit" title="Search (CTRL+ALT+f)"><i class="fas fa-search"></i></button>
            <label class="a11y-only" for="R-search-by">Search</label>
            <input data-search-input id="R-search-by" name="search-by" class="search-by" type="search" placeholder="Search...">
            <button class="search-clear" type="button" data-search-clear="" title="Clear search"><i class="fas fa-times" title="Clear search"></i></button>
          </div>
        </form></search>
      </div>
      <div id="R-homelinks" class="default-animation homelinks">
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-homelinks">
          <ul class="space collapsible-menu">
            <li class="" data-nav-id="/index.html"><a class="padding" href="/index.html"><i class="fa-fw fas fa-home"></i> Home</a></li>
          </ul>
        </div>
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-headercontrols">
          <ul class="">
          </ul>
        </div>
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
      </div>
      <div id="R-content-wrapper" class="highlightable">
        <div class="R-sidebarmenu R-shortcutmenu-main">
          <ul class="enlarge morespace collapsible-menu">
            <li class="" data-nav-id="/architecture/index.html"><a class="padding" href="/architecture/index.html">Kong Konnect Architectural Overview</a></li>
            <li class="" data-nav-id="/10-pre-requisites/index.html"><a class="padding" href="/10-pre-requisites/index.html">Pre-Requisites</a><ul id="R-subsections-188f3a304b47eda4169b210565024d52" class="collapsible-menu"></ul></li>
            <li class="" data-nav-id="/11-konnect-setup/index.html"><a class="padding" href="/11-konnect-setup/index.html">Konnect Setup</a><ul id="R-subsections-fd457d3a7fac9b2f9cefa5c6c0dae1e7" class="collapsible-menu"></ul></li>
            <li class="parent " data-nav-id="/12-api-gateway/index.html"><a class="padding" href="/12-api-gateway/index.html">Kong API Gateway</a><ul id="R-subsections-edeba57bcdf65a92672ecb9c5ed9177f" class="collapsible-menu">
            <li class="active " data-nav-id="/12-api-gateway/122-kong-service-route/index.html"><a class="padding" href="/12-api-gateway/122-kong-service-route/index.html">Kong Gateway Service and Kong Route</a></li>
            <li class="alwaysopen " data-nav-id="/12-api-gateway/15-use-cases/index.html"><a class="padding" href="/12-api-gateway/15-use-cases/index.html">Use Cases</a><ul id="R-subsections-d072a953a914cdb4c69798f4d5bdaaed" class="collapsible-menu"></ul></li></ul></li>
            <li class="" data-nav-id="/16-ai-gateway/index.html"><a class="padding" href="/16-ai-gateway/index.html">Kong AI Gateway</a><ul id="R-subsections-2f2bf218915a29de3a144cfa324a5fc4" class="collapsible-menu"></ul></li>
          </ul>
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-shortcuts">
          <ul class="space collapsible-menu">
          </ul>
        </div>
        <div id="R-footer-margin"></div>
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-footercontrols">
          <ul class="">
          </ul>
        </div>
<div id="R-footer"><p>Built with <a href="https://github.com/McShelby/hugo-theme-relearn" title="love"><i class="fas fa-heart"></i></a> by <a href="https://gohugo.io/">Hugo</a></p></div>
      </div>
    </aside>
    <script src="/js/clipboard/clipboard.min.js?1754488547" defer></script>
    <script src="/js/perfect-scrollbar/perfect-scrollbar.min.js?1754488547" defer></script>
    <script src="/js/theme.js?1754488547" defer></script>
  </body>
</html>
